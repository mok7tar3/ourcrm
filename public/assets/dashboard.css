/* Mobile Sidebar Fixes for RTL/LTR */
@media (max-width: 991.98px) {
    /* Mobile sidebar container */
    .dash-sidebar {
        position: fixed !important;
        top: 0 !important;
        bottom: 0 !important;
        left: -280px !important;
        z-index: 1050 !important;
        width: 280px !important;
        transition: transform 0.3s ease-in-out !important;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1) !important;
        overflow-y: auto !important;
    }

    /* RTL direction */
    html[dir="rtl"] .dash-sidebar {
        left: auto !important;
        right: -280px !important;
    }

    /* Show sidebar */
    .dash-sidebar.show {
        transform: translateX(280px) !important;
    }

    /* RTL show sidebar */
    html[dir="rtl"] .dash-sidebar.show {
        transform: translateX(-280px) !important;
    }

    /* Backdrop overlay */
    .sidebar-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1040;
        display: none;
    }

    .sidebar-backdrop.show {
        display: block;
    }

    /* Fix navbar content */
    .navbar-content {
        padding: 20px 15px !important;
    }

    /* Fix menu items for mobile */
    .dash-item {
        margin-bottom: 5px !important;
    }

    .dash-link {
        padding: 12px 15px !important;
        border-radius: 8px !important;
        margin-bottom: 2px !important;
    }

    /* Fix text overflow for Arabic */
    .dash-mtext {
        display: inline-block !important;
        max-width: 160px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        vertical-align: middle !important;
    }

    /* RTL specific text fixes */
    html[dir="rtl"] .dash-mtext {
        text-align: right !important;
        margin-right: 10px !important;
    }

    /* Fix icons positioning */
    .dash-micon {
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        min-width: 24px !important;
    }

    /* RTL icon positioning */
    html[dir="rtl"] .dash-micon {
        margin-left: 10px !important;
        margin-right: 0 !important;
        float: right !important;
    }

    /* Fix submenu for mobile */
    .dash-submenu {
        position: static !important;
        box-shadow: none !important;
        padding-left: 20px !important;
        background: transparent !important;
    }

    html[dir="rtl"] .dash-submenu {
        padding-left: 0 !important;
        padding-right: 20px !important;
    }

    .dash-submenu .dash-link {
        padding: 8px 15px !important;
        font-size: 13px !important;
    }

    /* Arrow icon fix */
    .dash-arrow i {
        transition: transform 0.3s ease !important;
    }

    .dash-hasmenu.show > .dash-link > .dash-arrow i {
        transform: rotate(90deg) !important;
    }

    html[dir="rtl"] .dash-hasmenu.show > .dash-link > .dash-arrow i {
        transform: rotate(-90deg) !important;
    }

    /* Fix active state */
    .dash-item.active .dash-link {
        background: var(--primary-color) !important;
        color: white !important;
    }
}

/* Extra small devices (phones) */
@media (max-width: 575.98px) {
    .dash-sidebar {
        width: 260px !important;
        left: -260px !important;
    }

    html[dir="rtl"] .dash-sidebar {
        right: -260px !important;
    }

    .dash-sidebar.show {
        transform: translateX(260px) !important;
    }

    html[dir="rtl"] .dash-sidebar.show {
        transform: translateX(-260px) !important;
    }

    .dash-mtext {
        max-width: 140px !important;
    }

    .dash-link {
        padding: 10px 12px !important;
        font-size: 14px !important;
    }
}

/* Ensure body doesn't scroll when sidebar is open */
body.sidebar-open {
    overflow: hidden !important;
}

/* Mobile toggle button styling */
#mobileSidebarToggle {
    display: none;
}

@media (max-width: 991.98px) {
    #mobileSidebarToggle {
        display: inline-block !important;
        background: transparent !important;
        border: none !important;
        color: inherit !important;
        font-size: 1.5rem !important;
        cursor: pointer !important;
        padding: 0.5rem !important;
        margin-right: 1rem !important;
    }

    html[dir="rtl"] #mobileSidebarToggle {
        margin-right: 0 !important;
        margin-left: 1rem !important;
    }

    /* Adjust header when sidebar is open */
    body.sidebar-open .pc-topbar,
    body.sidebar-open .dash-container {
        opacity: 0.5 !important;
        pointer-events: none !important;
    }
}

/* Fix for Arabic font in mobile */
@media (max-width: 991.98px) {
    html[lang="ar"] .dash-link,
    html[lang="ar"] .dash-mtext {
        font-family: "Almarai", sans-serif !important;
        font-weight: 400 !important;
        letter-spacing: 0 !important;
    }

    html[lang="ar"] .dash-submenu .dash-link {
        font-size: 12.5px !important;
    }
}

/* Prevent horizontal scrolling */
.dash-navbar {
    width: 100% !important;
    overflow-x: hidden !important;
}

.dash-item {
    width: 100% !important;
}